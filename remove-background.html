<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Remove Background</title>
  <link rel="stylesheet" href="styles.css" />
  <style>
    body { color: #e8f4f8; }
    .rb-container {
      position: relative; z-index: 250; max-width: 1200px; margin: 20px auto; padding: 20px;
      background: rgba(0,0,0,0.35); border: 1px solid rgba(127,219,218,0.35); border-radius: 10px;
      backdrop-filter: blur(6px);
    }
    .rb-title { font-family: 'Orbitron', monospace; font-size: 1.6rem; color: #48dbfb; margin-bottom: 12px; }
    .rb-sub { color: #a8e6cf; margin-bottom: 16px; }
    .drop-zone {
      border: 2px dashed #48dbfb; border-radius: 12px; padding: 30px; text-align: center; cursor: pointer;
      background: rgba(72,219,251,0.06); transition: background 0.2s ease, border-color 0.2s ease;
    }
    .drop-zone.dragover { background: rgba(72,219,251,0.12); border-color: #7fdbda; }
    .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin-top: 20px; align-items: start; }
    .panel { background: rgba(0,0,0,0.3); border: 1px solid rgba(127,219,218,0.25); border-radius: 8px; padding: 12px; }
    .panel h3 { font-family: 'Orbitron', monospace; font-size: 1rem; color: #48dbfb; margin-bottom: 10px; }
    canvas, img { max-width: 100%; height: auto; background: #111; }
    #orig, #outCanvas { max-height: 40vh; width: 100%; object-fit: contain; display: block; }
    .controls { 
      display: grid; 
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); 
      gap: 20px; 
      margin-top: 24px; 
      background: rgba(0,0,0,0.2); 
      border: 1px solid rgba(127,219,218,0.2); 
      border-radius: 12px; 
      padding: 20px; 
    }
    .ctrl { 
      position: relative; 
      background: rgba(0,0,0,0.3); 
      border: 1px solid rgba(127,219,218,0.15); 
      border-radius: 8px; 
      padding: 16px; 
      transition: all 0.2s ease; 
    }
    .ctrl:hover { 
      border-color: rgba(127,219,218,0.3); 
      background: rgba(0,0,0,0.4); 
    }
    .ctrl label { 
      display: flex; 
      justify-content: space-between; 
      align-items: center; 
      font-size: 0.95rem; 
      margin-bottom: 12px; 
      color: #48dbfb; 
      font-weight: 600; 
    }
    .ctrl .value-display { 
      background: rgba(72,219,251,0.1); 
      border: 1px solid rgba(72,219,251,0.3); 
      border-radius: 4px; 
      padding: 4px 8px; 
      font-size: 0.85rem; 
      font-family: 'Courier New', monospace; 
      min-width: 50px; 
      text-align: center; 
    }
    .ctrl input[type=range] { 
      width: 100%; 
      height: 6px; 
      background: rgba(127,219,218,0.2); 
      border-radius: 3px; 
      outline: none; 
      -webkit-appearance: none; 
      appearance: none; 
      cursor: pointer; 
      transition: all 0.2s ease; 
    }
    .ctrl input[type=range]::-webkit-slider-thumb { 
      -webkit-appearance: none; 
      appearance: none; 
      width: 20px; 
      height: 20px; 
      background: linear-gradient(135deg, #48dbfb, #7fdbda); 
      border: 2px solid #48dbfb; 
      border-radius: 50%; 
      cursor: pointer; 
      box-shadow: 0 2px 6px rgba(72,219,251,0.3); 
      transition: all 0.2s ease; 
    }
    .ctrl input[type=range]::-webkit-slider-thumb:hover { 
      transform: scale(1.1); 
      box-shadow: 0 4px 12px rgba(72,219,251,0.4); 
    }
    .ctrl input[type=range]::-moz-range-thumb { 
      width: 20px; 
      height: 20px; 
      background: linear-gradient(135deg, #48dbfb, #7fdbda); 
      border: 2px solid #48dbfb; 
      border-radius: 50%; 
      cursor: pointer; 
      box-shadow: 0 2px 6px rgba(72,219,251,0.3); 
      transition: all 0.2s ease; 
    }
    .ctrl input[type=range]::-moz-range-thumb:hover { 
      transform: scale(1.1); 
    }
    .ctrl input[type=range]:focus { 
      box-shadow: 0 0 0 2px rgba(72,219,251,0.3); 
    }
    .actions { 
      margin-top: 20px; 
      display: flex; 
      gap: 16px; 
      justify-content: center; 
    }
    .btn {
      font-family: 'Orbitron', monospace; 
      font-weight: 700; 
      letter-spacing: 0.05em; 
      font-size: 1rem;
      color: #0a1a2a; 
      background: linear-gradient(135deg, #ff6b6b, #feca57); 
      border: none; 
      padding: 12px 24px; 
      border-radius: 8px; 
      cursor: pointer; 
      text-decoration: none; 
      display: inline-block; 
      transition: all 0.2s ease; 
      box-shadow: 0 4px 12px rgba(255,107,107,0.3); 
    }
    .btn:hover { 
      transform: translateY(-2px); 
      box-shadow: 0 6px 20px rgba(255,107,107,0.4); 
    }
    .hint { 
      color: #7fdbda; 
      font-size: 0.85rem; 
      margin-top: 8px; 
      opacity: 0.8; 
      line-height: 1.4; 
    }
    /* Ensure proper stacking */
    .rb-container > * { position: relative; z-index: 1; }
    .controls { position: relative; z-index: 2; }
    .grid { position: relative; z-index: 1; }
  </style>
</head>
<body>
  <div class="rb-container">
    <div class="rb-title">Background Remover</div>
    <div class="rb-sub">Drag & drop an image below (or click) and it will auto-remove the white/near-white background.</div>

    <div id="dropZone" class="drop-zone" tabindex="0">
      Drop image here or click to choose
      <input id="fileInput" type="file" accept="image/*" style="position:absolute; inset:0; opacity:0; cursor:pointer;" />
      <div class="hint">Accepted: PNG, JPG, etc. Processing happens in your browser.</div>
    </div>

    <div class="controls">
      <div class="ctrl" style="grid-column: 1 / -1;">
        <label>
          <span>Aggressiveness</span>
          <span class="value-display" id="aggrOut">70</span>
        </label>
        <input id="aggr" type="range" min="0" max="100" value="70" />
        <div class="hint">Higher = removes darker off-whites and light grays. Lower = restores more background.</div>
      </div>
      <div class="ctrl">
        <label>
          <span>Brightness Threshold</span>
          <span class="value-display" id="bOut">250</span>
        </label>
        <input id="brightness" type="range" min="200" max="255" value="250" />
        <div class="hint">Minimum brightness to consider as background</div>
      </div>
      <div class="ctrl">
        <label>
          <span>Distance to White</span>
          <span class="value-display" id="dOut">120</span>
        </label>
        <input id="distance" type="range" min="0" max="255" value="120" />
        <div class="hint">Maximum distance from pure white (0-255)</div>
      </div>
      <div class="ctrl">
        <label>
          <span>Value Threshold</span>
          <span class="value-display" id="vOut">250</span>
        </label>
        <input id="valueT" type="range" min="200" max="255" value="250" />
        <div class="hint">HSV value threshold for background detection</div>
      </div>
      <div class="ctrl">
        <label>
          <span>Saturation Max</span>
          <span class="value-display" id="sOut">0.30</span>
        </label>
        <input id="saturation" type="range" min="0" max="100" value="30" />
        <div class="hint">Maximum saturation to consider as background</div>
      </div>
      <div class="ctrl">
        <label>
          <span>Feather (px)</span>
          <span class="value-display" id="fOut">3</span>
        </label>
        <input id="feather" type="range" min="0" max="8" value="3" />
        <div class="hint">Edge softening radius in pixels</div>
      </div>
    </div>

    <div class="grid">
      <div class="panel">
        <h3>Original</h3>
        <img id="orig" alt="Original preview" />
      </div>
      <div class="panel">
        <h3>Transparent Output</h3>
        <canvas id="outCanvas"></canvas>
        <div class="actions">
          <a id="downloadBtn" class="btn" download="output_transparent.png">Download PNG</a>
        </div>
      </div>
    </div>
  </div>

  <script src="remove-background.js"></script>
</body>
</html>


